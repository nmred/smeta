<?xml version="1.0" encoding="utf-8"?>

<!--
* vim: set expandtab tabstop=4 shiftwidth=4 softtabstop=4 foldmethod=marker: */
*
* DATABASE schame
-->

<!-- {{{ databases -->

<databases>
    <!-- {{{ database swansoft -->
    <database name="swan_soft">
        <charset>utf8</charset>
        <!-- {{{ tables -->
        <tables>
            <!-- {{{ table sequence_global -->

            <table name="sequence_global">
                <desc>维护全局的数据表的唯一序列号</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="table_name">
                        <desc>维护序列号的表名称</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>64</precision>
                        <default></default>
                    </column>

                    <column name="sequence_id">
                        <desc>自增长 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
						<unsigned>true</unsigned>
                        <default></default>
                    </column>

                </columns>

                <keys>
                    <key name="">
						<desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="table_name"></field>
                        </fields>
                    </key>

                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table sequence_device -->

            <table name="sequence_device">
                <desc>设备成员数据表的唯一序列号</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="device_id">
                        <desc>设备 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
						<unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="table_name">
                        <desc>维护序列号的表名称</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>64</precision>
                        <default></default>
                    </column>

                    <column name="sequence_id">
                        <desc>自增长 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
						<unsigned>true</unsigned>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
						<desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="device_id"></field>
                            <field name="table_name"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table sequence_monitor -->

            <table name="sequence_monitor">
                <desc>监控器数据表的唯一序列号</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="monitor_id">
                        <desc>设备 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
						<unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="table_name">
                        <desc>维护序列号的表名称</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>64</precision>
                        <default></default>
                    </column>

                    <column name="sequence_id">
                        <desc>自增长 ID</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
						<unsigned>true</unsigned>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
						<desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="monitor_id"></field>
                            <field name="table_name"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table device_key -->

            <table name="device_key">
                <desc>监控的设备关键表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="device_id">
                        <desc>设备 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="device_name">
                        <desc>设备名称(唯一)</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="device_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table device_basic -->

            <table name="device_basic">
                <desc>监控的设备基本信息表</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="device_id">
                        <desc>设备 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="device_display_name">
                        <desc>设备显示名称</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="host_name">
                        <desc>设备主机地址</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="device_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table device_monitor -->

            <table name="device_monitor">
                <desc>监控的设备的监控器</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="dm_id">
                        <desc>设备监控器 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="device_id">
                        <desc>设备 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="monitor_id">
                        <desc>监控器 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="dm_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table device_monitor_params -->

            <table name="device_monitor_params">
                <desc>监控器参数</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="value_id">
                        <desc>属性值 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>
                    <column name="attr_id">
                        <desc>监控器属性 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="dm_id">
                        <desc>设备监控器 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="value">
                        <desc>属性值</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="value_id"></field>
                            <field name="attr_id"></field>
                            <field name="device_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table monitor_basic -->

            <table name="monitor_basic">
                <desc>监控器管理</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="monitor_id">
                        <desc>监控器 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="monitor_name">
                        <desc>监控器名称</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="monitor_display_name">
                        <desc>监控器显示名称</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="steps">
                        <desc>监控器存储 rrd 的间隔时间 (秒)</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>
                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="monitor_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table monitor_attribute -->

            <table name="monitor_attribute">
                <desc>监控器属性管理</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="attr_id">
                        <desc>监控器属性 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="monitor_id">
                        <desc>监控器 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="attr_name">
                        <desc>属性名称</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="attr_display_name">
                        <desc>属性显示名称</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="form_type">
                        <desc>属性表单类型</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="form_data">
                        <desc>属性表单数据</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="attr_default">
                        <desc>属性默认值</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="attr_id"></field>
                            <field name="monitor_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table monitor_metric -->

            <table name="monitor_metric">
                <desc>监控器收集数据项</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="metric_id">
                        <desc>数据项 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="metric_name">
                        <desc>数据项名称</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="monitor_id">
                        <desc>监控器 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="collect_every">
                        <desc>轮询周期</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="time_threshold">
                        <desc>收集数据超时</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="title">
                        <desc>数据项标题</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="metric_id"></field>
                            <field name="monitor_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table monitor_archive -->

            <table name="monitor_archive">
                <desc>监控器数据归档规则</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="archive_id">
                        <desc>归档 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="monitor_id">
                        <desc>监控器 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="title">
                        <desc>归档规则标题</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="cf_type">
                        <desc>归档运算类型</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="xff">
                        <desc>无效数据判断界限</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <unsigned>true</unsigned>
                        <default>0.5</default>
                    </column>

                    <column name="steps">
                        <desc>归档一个数据点合并原始数据点个数</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="rows">
                        <desc>一共归档条目数</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="metric_id"></field>
                            <field name="monitor_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table graph_basic -->

            <table name="graph_basic">
                <desc>监控器绘图配置</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="graph_id">
                        <desc>绘图配置 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="scope_type">
                        <desc>该绘图配置作用范围 1: 全局 2：设备 3: 允许跨设备全局显示 4: 允许跨设备在提及的设备中显示</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>1</precision>
                        <default>1</default>
                    </column>

                    <column name="scope_ids">
                        <desc>作用范围 IDS</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="title">
                        <desc>图片的顶部标题</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="vlabel">
                        <desc>图片的垂直的标题</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="desc">
                        <desc>图片的描述信息</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="steps">
                        <desc>绘图的间隔点</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="start">
                        <desc>绘图的起始点</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="end">
                        <desc>绘图的终点</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="graph_id"></field>
                            <field name="monitor_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
            <!-- {{{ table graph_def -->

            <table name="graph_def">
                <desc>监控器绘图数据项定义</desc>
                <engine>InnoDB</engine>
                <charset>utf8</charset>
                <columns>
                    <column name="def_id">
                        <desc>绘图数据项定义 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="graph_id">
                        <desc>绘图配置 id</desc>
                        <type>int</type>
                        <nullable>false</nullable>
                        <precision>11</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                    <column name="name">
                        <desc>数据项的 name</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="ds_name">
                        <desc>RRD 数据库的数据源名</desc>
                        <type>varchar</type>
                        <nullable>false</nullable>
                        <precision>255</precision>
                        <default></default>
                    </column>

                    <column name="cf_type">
                        <desc>归并计算公式类型</desc>
                        <type>tinyint</type>
                        <nullable>false</nullable>
                        <precision>1</precision>
                        <unsigned>true</unsigned>
                        <default></default>
                    </column>

                </columns>

                <keys>
                    <key name="">
                        <desc></desc>
                        <type>primary</type>
                        <fields>
                            <field name="graph_id"></field>
                            <field name="def_id"></field>
                        </fields>
                    </key>
                </keys>
            </table>

            <!-- }}} -->
        </tables>
        <!-- }}} end tables -->
    </database>
    <!-- }}} end database swansoft -->
</databases>
<!-- }}} end databases -->
